{extend name="Layout:base"/}
{block name="title"}节点管理{/block}
{block name="body"}
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
  <td height="30"><table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
    <td height="24" bgcolor="#353c44"><table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
      <td>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
          <td width="6%" height="19" valign="bottom"><div align="center"><img src="__IMAGES__/tb.gif" width="14" height="14" /></div></td>
          <td width="94%" valign="bottom"><span class="header_title_text">节点管理</span></td>
          </tr>
        </table></td>
        <td align="right" width="50%">&nbsp;</td>
      </tr>
    </table></td>
    </tr>
  </table></td>
  </tr>  
  <tr>
  <td>
    <div style="title_img">
        {foreach name='arr' item='v'}
            {if condition="$flog eq $v['flog']"}<div class="title_click">{else /}<div class="title_normal">{/if}<a href="{:Url('@admin/Rbac/node',array('flog' => $v['flog'] ))}">{$v.remark}</a></div>
        {/foreach}
        <div class="add_new_module"><a href="{:Url('@admin/Rbac/addNode',array('pid'=>0,'level'=>1))}">添加模块</a></div>
    </div>
    <table width="100%" border="0" cellpadding="0" cellspacing="1" bgcolor="#a8c7ce" onmouseover="changeto()"  onmouseout="changeback()">
       <tr>
      <td height="20" bgcolor="#FFFFFF" class="STYLE6"><span class="STYLE19">{$data.remark}>></span></td>
      <td height="20" bgcolor="#FFFFFF" class="STYLE19">
        <div align="center"> 
          [<a href="{:Url('@admin/Rbac/addNode',array('pid'=>$data['id'],'level'=>2))}">添加控制器</a>]  | 
          <a href="{:Url('@admin/Rbac/ModifyNode',array('id'=>$data['id'],'level'=>1))}" >修改</a> | 
          <a href="{:Url('@admin/Rbac/deleteNode',array('id'=>$data['id'],'level'=>1))}" class='deleteaffirm'>删除</a></div></td>
      </tr>
     {foreach name="data.child" item='a'}
      <tr>
      <td height="20" bgcolor="#FFFFFF" class="STYLE6"><span class="STYLE19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$a.remark}>></span></td>
      <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center"> [<a href="{:Url('@admin/Rbac/addNode',array('pid'=>$a['id'],'level'=>3))}">添加方法</a>] | <a href="{:Url('@admin/Rbac/ModifyNode',array('id'=>$a['id'],'level'=>2))}">修改</a> | <a href="{:Url('@admin/Rbac/deleteNode',array('id'=>$a['id'],'level'=>2))}" class='deleteaffirm'>删除</a></div></td>
      </tr>
            {foreach name="a.child" item='f'}
            <tr>  
                  <td height="20" bgcolor="#FFFFFF" class="STYLE6"><span class="STYLE19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$f.remark}</span></td>
                   <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center"> <a href="{:Url('@admin/Rbac/ModifyNode',array('id'=>$f['id'],'level'=>3))}">修改</a> | <a href="{:Url('@admin/Rbac/deleteNode',array('id'=>$f['id'],'level'=>3))}" class='deleteaffirm'>删除</a></div></td>
             </tr>
            {/foreach}
        {/foreach}
    </table>
  </div>
  </td>
  </tr>
  </table></td>
  </tr>
</table>
{/block}
{block name="foot-js"}
    <script type ="text/javascript" src="__JS__/rbac.js"></script>
    <script type ="text/javascript" src="__JS__/deleteFirm.js"/>
{/block}